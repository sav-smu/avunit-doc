

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Define Specifications by AVUnit &mdash; AVUnit  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Semantics of Describing Specifications" href="Semanticss_of_Defining_Specifications.html" />
    <link rel="prev" title="Semantics of Describing Scenes" href="Semantics_of_Describing_Scenes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> AVUnit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction_to_AVUnit.html">Introduction to AVUnit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install_AVUnit.html">Install AVUnit</a></li>
<li class="toctree-l1"><a class="reference internal" href="AVUnit_examples.html">AVUnit examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language Description</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="Generate_scenarios_by_AVUnit.html">Generate Scenarios by AVUnit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Semantics_of_Describing_Scenes.html">Semantics of Describing Scenes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Define Specifications by AVUnit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#trajectories">Trajectories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#object-trajectories">Object Trajectories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ego-trajectory">Ego Trajectory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#agent-perceived-trajectory">Agent Perceived Trajectory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#agent-truth-trajectory">Agent Truth Trajectory</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#expressions">Expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#perception-difference-expressions">Perception Difference Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distance-expression">Distance Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#speed-expression">Speed Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#velocity-expression">Velocity Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#acceleration-expression">Acceleration Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expression-arithmetic-operators">Expression Arithmetic Operators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#predicates-and-assertions">Predicates and Assertions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#atomic-predicates">Atomic Predicates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-assertions">General Assertions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#a-complete-example">A Complete Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Semanticss_of_Defining_Specifications.html">Semantics of Describing Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Overall_BNF.html">Overall BNF</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extension to simulations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="simulations.html">AVUnit connected to Simulator and Autonomous Vehicle</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AVUnit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Define Specifications by AVUnit</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Build_specifications_by_AVUnit.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="define-specifications-by-avunit">
<h1>Define Specifications by AVUnit<a class="headerlink" href="#define-specifications-by-avunit" title="Permalink to this headline">¶</a></h1>
<p>This section summarises the syntax of AVUnit (Specification Part), our langauge for specifying AV correctness properties. In contrast to existing AV testing approaches, which tend to focus on weak oracles (e.g.~no collisions, reach destination eventually), AVUnit allows for the specification of richer correctness conditions about how the ego vehicle behaves across the multitude of scenarios it encounters during its journey.</p>
<div class="section" id="trajectories">
<h2>Trajectories<a class="headerlink" href="#trajectories" title="Permalink to this headline">¶</a></h2>
<p>Given a trace <span class="math notranslate nohighlight">\(\langle \theta_0, \theta_1, \ldots, \theta_n \rangle\)</span> of scenes, represented by the variable <span class="math notranslate nohighlight">\(trace\)</span>, we can use AVUnit to assert properties about the trajectories of objects along the trace.
In this section, we present the syntax of trajectories and the five types of expressions involving them: perception difference, position, velocity, speed, and acceleration.</p>
<div class="section" id="object-trajectories">
<span id="objecttrajectory"></span><h3>Object Trajectories<a class="headerlink" href="#object-trajectories" title="Permalink to this headline">¶</a></h3>
<p>AVUnit can be used to denote the trajectories of the ego vehicle, the trajectories of agents (e.g. NPCs, pedestrians, obstacles) as perceived by the ADS, and the true trajectories of those agents.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>objectTrajectory ::= egoTrajectory | agentPerceivedTrajectory | agentTrueTrajectory
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">egoTrajectory</span></code> , <code class="docutils literal notranslate"><span class="pre">agentPerceivedTrajectory</span></code> , <code class="docutils literal notranslate"><span class="pre">agentTrueTrajectory</span></code> will be introduced in the following part. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="ego-trajectory">
<h4>Ego Trajectory<a class="headerlink" href="#ego-trajectory" title="Permalink to this headline">¶</a></h4>
<p>The trajectory <span class="math notranslate nohighlight">\(\langle \theta_0(ego), \ldots \theta_n(ego)\rangle\)</span> of the ego vehicle (<span class="math notranslate nohighlight">\(egoTrajectory\)</span>) relative to a <span class="math notranslate nohighlight">\(trace\)</span> is obtained as follows:</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>egoTrajectory ::= trace&#39;[&#39;ego&#39;]&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>ego_state = trace[ego];
</pre></div>
</div>
</div>
<div class="section" id="agent-perceived-trajectory">
<h4>Agent Perceived Trajectory<a class="headerlink" href="#agent-perceived-trajectory" title="Permalink to this headline">¶</a></h4>
<p>The trajectory <span class="math notranslate nohighlight">\(\langle \theta_0(agent, perception)\)</span>, <span class="math notranslate nohighlight">\(\ldots\)</span>, <span class="math notranslate nohighlight">\(\theta_n(agent, perception)\rangle\)</span> of an agent as perceived by the ego vehicle is obtained using AVUnit code of the following form:</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>agentPerceivedTrajectory ::= trace&#39;[perception][&#39;(npcVehicle|pedestrian|obstacle)&#39;]&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the agent can be an NPC vehicle, pedestrian, or obstacle as specified by the user in a scenario. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>npc1_state = trace[perception][npc1];
npc2_state = trace[perception][npc2];
ped_state = trace[perception][ped];
</pre></div>
</div>
</div>
<div class="section" id="agent-truth-trajectory">
<h4>Agent Truth Trajectory<a class="headerlink" href="#agent-truth-trajectory" title="Permalink to this headline">¶</a></h4>
<p>Finally, the actual (ground truth) trajectory <span class="math notranslate nohighlight">\(\langle \theta_0(agent, truth), \ldots \theta_n(agent, truth)\rangle\)</span> of an agent is obtained using code of the following form:</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>agentTrueTrajectory ::= trace&#39;[truth][&#39;(npcVehicle|pedestrian|obstacle)&#39;]&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the agent can be an NPC vehicle, pedestrian, or obstacle as specified by the user in a scenario. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>npc1_truth = trace[truth][npc1];
npc2_truth = trace[truth][npc2];
ped_truth = trace[truth][ped];
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="expressions">
<h2>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="perception-difference-expressions">
<span id="id1"></span><h3>Perception Difference Expressions<a class="headerlink" href="#perception-difference-expressions" title="Permalink to this headline">¶</a></h3>
<p>The perception systems of ADSs are currently far from perfect, which makes it important to be able to specify properties involving expressions over the difference (<code class="docutils literal notranslate"><span class="pre">perceptionDiffExpr</span></code>) between some trajectory that it perceives (e.g. the position and velocity of an NPC) and what that trajectory actually is.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>perceptionDiffExpr ::= &#39;diff(&#39;agentPerceivedTrajectory&#39;,&#39;agentTrueTrajectory&#39;)&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the agent can be an NPC vehicle, pedestrian, or obstacle as specified by the user in a scenario. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>diff_npc1 = diff(npc1_state, npc1_truth);
diff_npc2 = diff(npc2_state, npc2_truth);
diff_ped = diff(ped_state, ped_truth);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ADS’s perception difference with respect to some NPC vehicles and a pedestrian can be obtained as above code.</p>
</div>
</div>
<div class="section" id="distance-expression">
<h3>Distance Expression<a class="headerlink" href="#distance-expression" title="Permalink to this headline">¶</a></h3>
<p>One can write an expression over the distance (<code class="docutils literal notranslate"><span class="pre">distanceExpr</span></code>) between two objects or between objects and specific positions (<a class="reference internal" href="types/scenset_types.html#type-position"><span class="std std-ref">Position</span></a>) in the scene. AVUnit treats the latter as special single-point polygons.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>distanceExpr ::= &#39;dis(&#39;(position|objectTrajectory)&#39;,&#39;(position|objectTrajectory)&#39;)&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">position</span></code> here is type of <a class="reference internal" href="types/scenset_types.html#type-position"><span class="std std-ref">Position</span></a>. The <code class="docutils literal notranslate"><span class="pre">objectTrajectory</span></code> here is type of <a class="reference internal" href="#objecttrajectory"><span class="std std-ref">Object Trajectories</span></a>. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>testing_p = (20, 214);
dis1 = dis(ego_state, npc1_truth);
dis2 = dis(ego_state, testing_p);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code denotes the distance between the ego vehicle and an NPC vehicle (Line 2) as well as the ego vehicle and and a specific point (Line 3).</p>
</div>
</div>
<div class="section" id="speed-expression">
<h3>Speed Expression<a class="headerlink" href="#speed-expression" title="Permalink to this headline">¶</a></h3>
<p>The language can express the difference between two speeds (<code class="docutils literal notranslate"><span class="pre">speedExpr</span></code>), which are real scalars without directions.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>speedExpr ::= &#39;spd(&#39;(speed|objectTrajectory)&#39;,&#39;(speed|objectTrajectory)&#39;)&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">speed</span></code> here is type of <a class="reference internal" href="types/value_types.html#type-realvalue"><span class="std std-ref">Real Value</span></a>. The <code class="docutils literal notranslate"><span class="pre">objectTrajectory</span></code> here is type of <a class="reference internal" href="#objecttrajectory"><span class="std std-ref">Object Trajectories</span></a>. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>speed_dis = spd(ego_state, npc2_state);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code expresses the difference between the speed of the ego vehicle and an NPC vehicle.</p>
</div>
</div>
<div class="section" id="velocity-expression">
<h3>Velocity Expression<a class="headerlink" href="#velocity-expression" title="Permalink to this headline">¶</a></h3>
<p>AVUnit can express the difference between velocities (<code class="docutils literal notranslate"><span class="pre">velocityExpr</span></code>), which unlike speeds, are vectors that include direction.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>velocityExpr::=&#39;vel(&#39;(velocity|objectTrajectory)&#39;,&#39;(velocity|objectTrajectory)&#39;)&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">velocity</span></code> here is type of <a class="reference internal" href="types/value_types.html#type-coordinate"><span class="std std-ref">Coordinate</span></a>. The <code class="docutils literal notranslate"><span class="pre">objectTrajectory</span></code> here is type of <a class="reference internal" href="#objecttrajectory"><span class="std std-ref">Object Trajectories</span></a>. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>velocity_dis = vel(ego_state, ped_truth);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code expresses the actual difference in velocity between the ego vehicle and a pedestrian.</p>
</div>
</div>
<div class="section" id="acceleration-expression">
<h3>Acceleration Expression<a class="headerlink" href="#acceleration-expression" title="Permalink to this headline">¶</a></h3>
<p>The language supports acceleration expressions (<code class="docutils literal notranslate"><span class="pre">accelerationExpr</span></code>; also vectors), which are important for specifying properties about hard breaking and sudden acceleration during travel, which in general should not be acceptable behaviour of AVs.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>accelerationExpr ::= &#39;acc(&#39;(velocity|objectTrajectory)&#39;,&#39;(acceleration|objectTrajectory)&#39;)&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">velocity</span></code> here is type of <a class="reference internal" href="types/value_types.html#type-coordinate"><span class="std std-ref">Coordinate</span></a>. The <code class="docutils literal notranslate"><span class="pre">objectTrajectory</span></code> here is type of <a class="reference internal" href="#objecttrajectory"><span class="std std-ref">Object Trajectories</span></a>. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>acceleration_dis = acc(npc1_state, npc2_state)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code expresses the distance between the acceleration vectors of the two NPC vehicles.</p>
</div>
</div>
<div class="section" id="expression-arithmetic-operators">
<span id="combination-of-expression"></span><h3>Expression Arithmetic Operators<a class="headerlink" href="#expression-arithmetic-operators" title="Permalink to this headline">¶</a></h3>
<p>Note that while not shown in the grammar above (For details, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>), basic operators can also be applied to the above expressions. AVUnit applies <code class="docutils literal notranslate"><span class="pre">.+</span></code>, <code class="docutils literal notranslate"><span class="pre">.-</span></code>, <code class="docutils literal notranslate"><span class="pre">.*</span></code> and <code class="docutils literal notranslate"><span class="pre">./</span></code> to describe element-wise arithmetic operators on different expressions.</p>
<p>For example, the following code:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>ave_diff = (diff_np1 .+ diff_npc2 .+ diff_ped) ./ 3;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code expresses the average perception error of the ADS perception module with respect to two NPC vehicles and a pedestrian.</p>
</div>
</div>
</div>
<div class="section" id="predicates-and-assertions">
<h2>Predicates and Assertions<a class="headerlink" href="#predicates-and-assertions" title="Permalink to this headline">¶</a></h2>
<p>AVUnit supports general assertions over the previously defined expressions, e.g. properties about the ego vehicle’s acceleration behaviour.</p>
<div class="section" id="atomic-predicates">
<span id="id2"></span><h3>Atomic Predicates<a class="headerlink" href="#atomic-predicates" title="Permalink to this headline">¶</a></h3>
<p>The simplest assertions we can specify in AVUnit are atomic predicates defined over <a class="reference internal" href="#id1"><span class="std std-ref">expressions</span></a> and relational operators (e.g. ==, !=, &gt;, &gt;=). This is the basic elements of General Assertions.</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>atomicPredicate ::= specExpr compareOperator specExpr
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">specExpr</span></code> here is type of <a class="reference internal" href="#id1"><span class="std std-ref">Expressions</span></a>, <a class="reference internal" href="#combination-of-expression"><span class="std std-ref">Combination of Expression</span></a>, or <a class="reference internal" href="types/value_types.html#type-realvalue"><span class="std std-ref">Real Value</span></a>. The <code class="docutils literal notranslate"><span class="pre">compareOperator</span></code> here can be one of {==, !=, &gt;, &gt;= }. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>predicate_0 = dis1 &gt; 1;
predicate_1 = speed_dis &gt; 0;
predicate_2 = ave_diff &lt;= 0.5;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above three atomic predicates respectively assert that some distance is larger than one, that some object is not stationary, and that some average difference in distance perception is less than 0.5.</p>
</div>
</div>
<div class="section" id="general-assertions">
<h3>General Assertions<a class="headerlink" href="#general-assertions" title="Permalink to this headline">¶</a></h3>
<p>In AVUnit, atomic predicates(<code class="docutils literal notranslate"><span class="pre">atomicPredicate</span></code>) can be combined with temporal operators—always’ (<code class="docutils literal notranslate"><span class="pre">G</span></code>), eventually (<code class="docutils literal notranslate"><span class="pre">F</span></code>), until (<code class="docutils literal notranslate"><span class="pre">U</span></code>), and next (<code class="docutils literal notranslate"><span class="pre">X</span></code>)—in order to specify rich assertions over the traces of testing scenarios. Furthermore, the resulting assertions can be combined with the standard logical operators: and (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>), or (<code class="docutils literal notranslate"><span class="pre">|</span></code>), not (<code class="docutils literal notranslate"><span class="pre">~</span></code>), and implies (<code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>).</p>
<p>BNF Defination:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>assertion ::= atomicPredicate | assertion(&#39;&amp;&#39; | &#39;|&#39; | &#39;-&gt;&#39;) assertion|&#39;~&#39; assertion | (&#39;G&#39;|&#39;F&#39;|&#39;X&#39;|&#39;U&#39;)assertion | (&#39;G&#39;|&#39;F&#39;|&#39;U&#39;)&#39;[&#39;realExpr&#39;:&#39;realExpr&#39;]&#39;assertion
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">atomicPredicate</span></code> here is type of <a class="reference internal" href="#atomic-predicates"><span class="std std-ref">Atomic Predicates</span></a>. The <code class="docutils literal notranslate"><span class="pre">realExpr</span></code> is type of <a class="reference internal" href="types/value_types.html#type-realvalue"><span class="std std-ref">Real Value</span></a>. The BNF defination here is a simplified one. For the complete version, please refer to <a class="reference internal" href="Overall_BNF.html"><span class="doc">here</span></a>.</p>
</div>
<p>Related Examples:</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>assertion1 = dis(ego_state, npc1_truth) &lt;= 50 -&gt; diff(npc1_state, npc1_truth) &lt; {0.5};
assertion2 = dis(ego_state, npc1_truth) &gt;= 1;
assertion3 = G(assertion1 &amp; assertion2);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These respectively specify that:</p>
<ol class="arabic simple">
<li><p>if the true distance between the ego vehicle and NPC1 is less than 50, then perception difference is less than 0.5;</p></li>
<li><p>the actual distance between the ego vehicle and NPC1 is greater than or equal to 1;</p></li>
<li><p>the previous two assertions should always hold along the trace.</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="a-complete-example">
<h2>A Complete Example<a class="headerlink" href="#a-complete-example" title="Permalink to this headline">¶</a></h2>
<p>For the scenario defined <a class="reference internal" href="Generate_scenarios_by_AVUnit.html#scenario-a-complete-example"><span class="std std-ref">here</span></a>, we can specify different assertions, such as collision avoidance with <code class="docutils literal notranslate"><span class="pre">npc1</span></code>, i.e., at any time, the distance between the ego vehicle and <code class="docutils literal notranslate"><span class="pre">npc1</span></code> is larger than a predefined safety distance. It can be described using AVUnit as follows.</p>
<div class="highlight-AVUnit notranslate"><div class="highlight"><pre><span></span>Trace trace = EXE(scenario0);
ego_vehicle_state = trace[ego];
npc_vehicle1_truth = trace[truth][npc1];

dis1 = dis(ego_vehicle_state, npc_vehicle1_truth);
statement1 = dis1 &gt;= 1.0;
trace |= G (statement1);
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Semanticss_of_Defining_Specifications.html" class="btn btn-neutral float-right" title="Semantics of Describing Specifications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Semantics_of_Describing_Scenes.html" class="btn btn-neutral float-left" title="Semantics of Describing Scenes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SUN Yang.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>